<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notas y C치lculos M치gicos</title>
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <div class="character character-cloud" style="top: 10%; left: 5%;"></div>
    <div class="character character-star floating" style="top: 20%; right: 8%; transform: scale(0.8);"></div>
    <div class="character character-cloud" style="bottom: 10%; left: 10%; transform: scale(1.2);"></div>

    <h1>游꺚 Notas y C치lculos Kawaii 游꺚</h1>

    <div class="theme-selector">
        <div class="theme-option" style="background: linear-gradient(135deg, #8ecae6, #219ebc, #ffb703);" onclick="setTheme('default')" title="Tema Predeterminado"></div>
        <div class="theme-option" style="background: linear-gradient(135deg, #c8e0d8, #8fb3a5, #f4a261);" onclick="setTheme('ghibli')" title="Tema Ghibli"></div>
        <div class="theme-option" style="background: linear-gradient(135deg, #3a506b, #5bc0be, #fde74c);" onclick="setTheme('dark')" title="Tema Oscuro"></div>
        <div class="theme-option active" style="background: linear-gradient(135deg, #FFC0CB, #FFB6C1, #DB7093);" onclick="setTheme('kawaii')" title="Tema Kawaii"></div>
        <button onclick="showColorPicker()" style="padding: 5px 10px; font-size: 0.8rem; background: var(--accent-color);">Personalizar</button>
    </div>

    <div class="container">
        <div class="section">
            <h2><i class="fas fa-feather-alt"></i> Mis Notas</h2>
            <textarea id="nota" rows="4" placeholder="Escribe tus pensamientos, ideas o recordatorios aqu칤..."></textarea>
            <div class="button-group">
                <button class="primary" onclick="guardarNota()"><i class="fas fa-save"></i> Guardar Nota</button>
                <button onclick="limpiarNota()"><i class="fas fa-broom"></i> Limpiar</button>
            </div>
        </div>

        <div class="section">
            <h2><i class="fas fa-tasks"></i> Lista de Tareas</h2>
            <div class="todo-input-group">
                <input type="text" id="todo-input" placeholder="A침adir una nueva tarea...">
                <button class="primary" onclick="agregarTarea()"><i class="fas fa-plus"></i> A침adir</button>
            </div>
            <ul id="todo-list"></ul>
        </div>

        <div class="section">
            <h2><i class="fas fa-calculator"></i> Calculadora M치gica</h2>
            <div class="calculator-grid">
                <div>
                    <label for="precio1">Primer valor:</label>
                    <input type="number" id="precio1" placeholder="Ej: 12.50">
                </div>
                <div>
                    <label for="precio2">Segundo valor:</label>
                    <input type="number" id="precio2" placeholder="Ej: 8.75">
                </div>
            </div>
            <div class="button-group">
                <button class="secondary" onclick="calcular('suma')"><i class="fas fa-plus"></i> Sumar</button>
                <button class="secondary" onclick="calcular('resta')"><i class="fas fa-minus"></i> Restar</button>
                <button class="secondary" onclick="calcular('multiplicacion')"><i class="fas fa-times"></i> Multiplicar</button>
                <button class="secondary" onclick="calcular('division')"><i class="fas fa-divide"></i> Dividir</button>
            </div>
            <div id="resultado" class="result-box"></div>
            <button class="primary" onclick="guardarCalculo()"><i class="fas fa-calculator"></i> Guardar C치lculo</button>
        </div>

        <div class="section">
            <h2><i class="fas fa-history"></i> Historial Encantado</h2>
            <div class="button-group">
                <button onclick="mostrarHistorial('todo')"><i class="fas fa-list"></i> Todo</button>
                <button onclick="mostrarHistorial('notas')"><i class="fas fa-sticky-note"></i> Solo Notas</button>
                <button onclick="mostrarHistorial('calculos')"><i class="fas fa-calculator"></i> Solo C치lculos</button>
                <button class="danger" onclick="limpiarHistorial()"><i class="fas fa-trash"></i> Borrar Todo</button>
            </div>
            <div class="history" id="historial">
                <div class="empty-state">
                    <i class="fas fa-cloud"></i>
                    <p>Tu historial est치 vac칤o</p>
                    <p>Comienza escribiendo una nota o haciendo un c치lculo</p>
                </div>
            </div>
        </div>
    </div>

    <div class="floating-buttons">
        <button class="floating-button" onclick="scrollToTop()" title="Ir arriba"><i class="fas fa-arrow-up"></i></button>
        <button class="floating-button" onclick="mostrarAyuda()" title="Ayuda"><i class="fas fa-question"></i></button>
    </div>

    <div id="color-picker-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: var(--card-color); padding: 20px; border-radius: 10px; max-width: 400px; width: 90%;">
            <h2 style="margin-bottom: 15px;">Personalizar colores</h2>
            <div class="custom-color-picker">
                <div class="color-option">
                    <label>Principal:</label>
                    <input type="color" id="color-primary" class="color-input" value="#8ecae6">
                </div>
                <div class="color-option">
                    <label>Secundario:</label>
                    <input type="color" id="color-secondary" class="color-input" value="#219ebc">
                </div>
                <div class="color-option">
                    <label>Acento:</label>
                    <input type="color" id="color-accent" class="color-input" value="#ffb703">
                </div>
                <div class="color-option">
                    <label>Fondo:</label>
                    <input type="color" id="color-background" class="color-input" value="#fefae0">
                </div>
                <div class="color-option">
                    <label>Texto:</label>
                    <input type="color" id="color-text" class="color-input" value="#023047">
                </div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                <button onclick="aplicarColoresPersonalizados()" style="background: var(--secondary-color);"><i class="fas fa-check"></i> Aplicar</button>
                <button onclick="ocultarColorPicker()" style="background: var(--accent-color);"><i class="fas fa-times"></i> Cancelar</button>
                <button onclick="resetColores()" style="background: #e63946;"><i class="fas fa-undo"></i> Restablecer</button>
            </div>
        </div>
    </div>

    <div id="help-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: var(--card-color); padding: 20px; border-radius: 10px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;">
            <h2 style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
                <span><i class="fas fa-question-circle"></i> Ayuda</span>
                <button onclick="ocultarAyuda()" style="background: none; border: none; color: var(--text-color); font-size: 1.5rem; cursor: pointer;">&times;</button>
            </h2>
            <div style="margin-bottom: 15px;">
                <h3><i class="fas fa-feather-alt"></i> Notas</h3>
                <p>Escribe cualquier nota, idea o recordatorio en el 치rea de texto. Puedes guardarla para consultarla m치s tarde.</p>
            </div>
            <div style="margin-bottom: 15px;">
                <h3><i class="fas fa-calculator"></i> Calculadora</h3>
                <p>Ingresa dos valores y selecciona la operaci칩n que deseas realizar (suma, resta, multiplicaci칩n o divisi칩n). El resultado aparecer치 debajo.</p>
            </div>
            <div style="margin-bottom: 15px;">
                <h3><i class="fas fa-history"></i> Historial</h3>
                <p>Tus notas y c치lculos guardados aparecer치n aqu칤. Puedes filtrarlos por tipo (notas, c치lculos o todo) y borrar el historial completo si lo deseas.</p>
            </div>
            <div style="margin-bottom: 15px;">
                <h3><i class="fas fa-palette"></i> Personalizaci칩n</h3>
                <p>Selecciona entre los temas predefinidos o personaliza los colores a tu gusto usando el selector de colores.</p>
            </div>
            <button onclick="ocultarAyuda()" style="width: 100%; padding: 10px; background: var(--secondary-color); color: white; border: none; border-radius: 5px; margin-top: 10px;">Entendido</button>
        </div>
    </div>

    <script src="js/script.js"></script>
    <audio id="click-sound" src="audio/click.mp3" preload="auto"></audio>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js').then(registration => {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, err => {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
    </script>
</body>
</html>
